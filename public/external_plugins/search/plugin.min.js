import { useRouter } from "vue-router";
import { convertHtmlToMarkdown } from "dom-to-semantic-markdown";
const router = useRouter();

(function () {
  tinymce.PluginManager.add("websearch_plugin", function (editor, url) {
    editor.ui.registry.addButton("websearch", {
      //   text: 'search',
      icon: "websearch",
      onAction: function () {
        const selectedText = editor.selection.getContent();
        editor.windowManager.open({
          title: "搜索",
          size: "large",
          body: {
            type: "panel",
            items: [
              {
                type: "htmlpanel",
                html: `<iframe style="width:100%; height:70vh" src="https://www.bing.com/?q=${encodeURI(
                  convertHtmlToMarkdown(selectedText)
                )}"></iframe>`,
              },
            ],
          },
          // onOpen: function () {
          //   const mindMapContainerElement =
          //     document.getElementById(mindMapContainerId);
          //   const mindMapInstance = new MindMap({
          //     el: mindMapContainerElement,
          //     data: mindMapData,
          //   });
          // },
        });
      },
    });
  });
})();
