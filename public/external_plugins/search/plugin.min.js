import {useRouter} from 'vue-router'
const router=useRouter()

;(function () {
    tinymce.PluginManager.add('websearch_plugin', function(editor, url) {
      editor.ui.registry.addButton('websearch', {
        //   text: 'search',
          icon: 'websearch',
          onAction: function() {
            router.push('/text-search')
            //   const selectedText = editor.selection.getContent();
  
             
  
            //   const mindMapData = {
            //       data: {
            //           text: selectedText,
            //       },
            //       children: []
            //   };
  
            //   const mindMapContainerId = 'mindmap-container';
            //   const mindMapContainer = `<div id="${mindMapContainerId}" style=" height: 400px;float:right;"></div>`;
  
             
            //   editor.windowManager.open({
            //       title: '搜索',
            //       body: {
            //           type: 'panel',
            //           items: [
            //               {
            //                   type: 'htmlpanel',
            //                   html: mindMapContainer,
            //               },
            //           ],
            //       },
            //       buttons: [
            //           {
            //               type: 'submit',
            //               text: '保存',
            //               subtype: 'primary',
            //               onclick: function() {
            //                   const mindMapContainerElement = document.getElementById(mindMapContainerId);
            //                   const mindMapInstance = new MindMap({
            //                       el: mindMapContainerElement,
            //                       data: mindMapData,
            //                   });
            //                   const imgData = mindMapInstance.exportImage(); // 假设这是自定义方法
            //                   editor.insertContent(`<img src="${imgData}" />`);
            //                   editor.windowManager.close();
            //               }
            //           },
            //           {
            //               type: 'cancel',
            //               text: '取消',
            //               onclick: 'close'
            //           }
            //       ],
            //       onOpen: function() {
            //           const mindMapContainerElement = document.getElementById(mindMapContainerId);
            //           const mindMapInstance = new MindMap({
            //               el: mindMapContainerElement,
            //               data: mindMapData,
            //           });
            //       }
            //   });
          }
      });
  });
  
  })()